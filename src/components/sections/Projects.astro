---
import SectionHeader from "../common/SectionHeader.astro";

interface Project {
    title: string;
    description: string;
    technologies: string[];
    features: string[];
    github?: string;
    demo?: string;
    category: string;
}

const projects: Project[] = [
    {
        title: "E-Commerce Platform",
        description: "A full-stack e-commerce application with user authentication, product management, and secure payment integration. Features include real-time inventory updates and responsive design.",
        technologies: ["React", "Node.js", "MongoDB", "Stripe"],
        features: ["Modern architecture", "Responsive design", "Best practices", "Well documented"],
        github: "https://github.com/naoyafukada/ecommerce",
        demo: "https://demo.example.com",
        category: "fullstack"
    },
    {
        title: "Task Management App",
        description: "Collaborative task management tool with drag-and-drop functionality, real-time updates, and team collaboration features. Built with modern web technologies.",
        technologies: ["TypeScript", "Next.js", "Prisma", "PostgreSQL"],
        features: ["Modern architecture", "Responsive design", "Best practices", "Well documented"],
        github: "https://github.com/naoyafukada/taskapp",
        demo: "https://demo.example.com",
        category: "fullstack"
    },
    {
        title: "Weather Dashboard",
        description: "Interactive weather application that displays current conditions, forecasts, and historical data. Features location-based search and beautiful data visualizations.",
        technologies: ["React", "API Integration", "Chart.js", "Tailwind"],
        features: ["Modern architecture", "Responsive design", "Best practices", "Well documented"],
        github: "https://github.com/naoyafukada/weather",
        demo: "https://demo.example.com",
        category: "frontend"
    },
    {
        title: "Social Media API",
        description: "RESTful API for a social media platform with authentication, post management, comments, and real-time notifications. Includes comprehensive documentation.",
        technologies: ["Express", "MongoDB", "JWT", "Socket.io"],
        features: ["Modern architecture", "Responsive design", "Best practices", "Well documented"],
        github: "https://github.com/naoyafukada/social-api",
        category: "backend"
    },
]

---

<section id="projects" class="projects">
    <SectionHeader mainText="Featured" highlightText="Projects" highlightClass="text-emerald-400" underlineClass="bg-emerald-400"
        subtitle="Building solutions with code, one project at a time"></SectionHeader>

    <div class="filter-tabs">
        <button class="filter-tab active" data-filter="all">
            <span class="text-icon">*</span>
            All Projects
        </button>
        <button class="filter-tab" data-filter="fullstack">
            <span class="text-lg">&lt;/&gt;</span>
            Full Stack
        </button>
        <button class="filter-tab" data-filter="frontend">
            <span class="text-lg">üé®</span>
            Frontend
        </button>
        <button class="filter-tab" data-filter="backend">
            <span class="text-lg">‚öôÔ∏è</span>
            Backend
        </button>
    </div>

    <div class="projects-container">
        {projects.map((project) => (
            <div class="project-item" data-category={project.category}>
                <div class="project-inner">
                    <div class="project-front">
                        <div class="front-header">
                            <div class="folder-icon">
                                <i class="fa-regular fa-folder-open"></i>
                            </div>
                            <div class="project-links-top">
                                {project.github && (
                                    <a href={project.github} class="icon-link" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                                        <i class="fa-brands fa-github"></i>
                                    </a>
                                )}
                                {project.demo && (
                                    <a href={project.demo} class="icon-link" target="_blank" rel="noopener noreferrer" aria-label="Live Demo">
                                        <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                    </a>
                                )}
                            </div>
                        </div>
                        <h3 class="project-title">{project.title}</h3>
                        <p class="project-description">{project.description}</p>

                        <div class="tech-list">
                            {project.technologies.map((tech) => (
                                <span class="tech-item">{tech}</span>
                            ))}
                        </div>
                    </div>
                    <div class="project-back">
                        <div class="w-full">
                            <h3 class="back-title">{project.title}</h3>
                            <div class="back-divider"></div>
                            <div class="back-features">
                                {project.features.map((feature) => (
                                    <div class="feature-line">
                                        <span class="feature-bullet">‚ñ∏</span>
                                        <span>{feature}</span>
                                    </div>
                                ))}
                            </div>
                            <div class="back-actions">
                                {project.github && (
                                    <a href={project.github} class="back-button github" target="_blank" rel="noopener noreferrer">
                                        <i class="fa-brands fa-github"></i>
                                        View Code
                                    </a>
                                )}
                                {project.demo && (
                                    <a href={project.demo} class="back-button demo" target="_blank" rel="noopener noreferrer">
                                        <i class="fa-solid fa-external-link-alt"></i>
                                        Live Demo
                                    </a>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        ))}
    </div>
</section>

<script>
    const filterButtons = document.querySelectorAll('filter-tab');
    const projectItems = document.querySelectorAll('.project-item');

    filterButtons.forEach(button => {
        button.addEventListener('click', ()=> {
            const filter = button.getAttribute('data-filter');

            // Update active state
            filterButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            // Filter Projects
            projectItems.forEach(item => {
                const category = item.getAttribute('data-category');

                if (filter === 'all' || category === filter) {
                    item.classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            })
        })
    })
</script>

<style>
    @reference "tailwindcss";

    .projects {
        @apply max-w-7xl mx-auto px-6 my-40 scroll-mt-20 z-1
    }

    /* Filter Tabs */
    .filter-tabs {
        @apply flex flex-wrap justify-center gap-3 mb-12;
    }

    .filter-tab {
        @apply px-4 py-2 rounded-lg border transition-all duration-300
            flex items-center gap-2 text-sm font-medium
            focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400;
        background: rgba(15, 23, 42, 0.6);
        border-color: rgba(71, 85, 105, 0.5);
        color: #94a3b8;
    }

    .filter-tab:hover {
        border-color: #64748b;
        color: #e2e8f0;
        transform: translateY(-2px);
    }

    .filter-tab.active {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(6, 182, 212, 0.15) 100%);
        border-color: #10b981;
        color: #10b981;
        box-shadow: 0 0 20px rgba(16, 185, 129, 0.2);
    }

    /* Projects Container */
    .projects-container {
        @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6;
    }

    .project-item {
        @apply transition-all duration-500;
        perspective: 1000px;
        min-height: 350px;
    }

    .project-item.hidden {
        @apply opacity-0 scale-95 pointer-events-none;
        height: 0;
        margin: 0;
        min-height: 0;
    }

    .project-inner {
        @apply relative h-full w-full transition-transform duration-700;
        transform-style: preserve-3d;
    }

    .project-item:hover .project-inner {
        transform: rotateY(180deg);
    }

    .project-front, .project-back {
        @apply absolute w-full h-full rounded-xl p-6;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        background: linear-gradient(145deg, #1e293b 0%, #0f172a 100%);
        border: 1px solid #334155;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
    }

    .project-front {
        @apply flex flex-col;
    }

    /* Project Front */
    .front-header {
        @apply flex items-center justify-between mb-4;
    }

    .folder-icon {
        @apply text-4xl text-emerald-400;
    }

    .project-links-top {
        @apply flex gap-3;
    }

    .icon-link {
        @apply text-slate-400 hover:text-emerald-400 transition-colors duration-300 text-xl;
    }

    .project-title {
        @apply text-xl font-bold text-white mb-3;
    }

    .project-description {
        @apply text-slate-300 text-sm leading-relaxed mb-auto;
    }

    .tech-list {
        @apply flex flex-wrap gap-2 mt-6 pt-6 border-t border-slate-700;
    }

    .tech-item {
        @apply text-xs text-cyan-300 font-mono;
    }

    /* Project Back */
    .project-back {
        transform: rotateY(180deg);
        @apply flex items-center justify-center;
        background: linear-gradient(145deg, #0f172a 0%, #1e293b 100%);
    }

    .back-title {
        @apply text-2xl font-bold text-center mb-4;
        background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .back-divider {
        @apply w-16 h-1 bg-gradient-to-r from-emerald-400 to-cyan-400 mx-auto rounded-full mb-6;
    }

    .back-features {
        @apply space-y-3 mb-8 ml-4;
    }

    .feature-line {
        @apply flex items-center gap-3 text-slate-300;
    }

    .feature-bullet {
        @apply text-emerald-400 font-bold;
    }

    .back-actions {
        @apply flex gap-3 justify-center;
    }

    .back-button {
        @apply flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm
            transition-all duration-300 border
            focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400;
    }

    .back-button:hover {
        transform: translateY(-2px);
    }

    .back-button.github {
        background: rgba(16, 185, 129, 0.1);
        border-color: rgba(16, 185, 129, 0.3);
        color: #10b981;
    }

    .back-button.github:hover {
        background: rgba(16, 185, 129, 0.2);
        border-color: #10b981;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .back-button.demo {
        background: rgba(6, 182, 212, 0.1);
        border-color: rgba(6, 182, 212, 0.3);
        color: #06b6d4;
    }

    .back-button.demo:hover {
        background: rgba(6, 182, 212, 0.2);
        border-color: #06b6d4;
        box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
    }
</style>